{"ast":null,"code":"var _jsxFileName = \"/Users/johnculbreth/Documents/GitHub/react-catfacts/src/components/CatWindow/CatWindow.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport './CatWindow.css';\nimport { useCat, useCatUpdate } from '../../contexts.js';\nimport { Button, Modal } from 'react-bootstrap'; //Main Display on Right\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst urlRegex = /^(?:(?:https?|ftp):\\/\\/)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/\\S*)?$/;\nconst months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\nfunction CatWindow() {\n  _s();\n\n  //get selected cat props from context\n  const selected = useCat();\n  const select = useCatUpdate(); //Edit Modal state + handlers\n\n  const [showEdit, setShowEdit] = useState(false);\n\n  const handleCloseEdit = () => setShowEdit(false);\n\n  const handleShowEdit = () => setShowEdit(true); //Delete Modal state + handlers\n\n\n  const [showDelete, setShowDelete] = useState(false);\n\n  const handleShowDelete = () => setShowDelete(true);\n\n  const handleCloseDelete = () => setShowDelete(false); //determine localStorage index for cat to be edited/deleted\n\n\n  let cats = JSON.parse(localStorage.getItem(\"cats\"));\n  let index;\n\n  if (selected != null) {\n    index = cats.findIndex(cat => cat.id === selected.id);\n  } //Upon delete confirmation, splice array, return new JSON string, and set selected to null\n\n\n  function handleConfirmDelete() {\n    cats.splice(index, 1);\n    cats = JSON.stringify(cats);\n    localStorage.setItem(\"cats\", cats);\n    select(null);\n  } //validate URL\n\n\n  function is_url(str) {\n    if (urlRegex.test(str)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  function handleSaveEdit() {\n    document.getElementById(\"catErrors\").innerHTML = \"\";\n    let hasErrors = false;\n    const errors = [];\n    const newName = document.getElementById(\"name\").value;\n    const newBirthday = document.getElementById(\"bday\").value;\n    const newURL = document.getElementById(\"url\").value;\n    const newOwner = document.getElementById(\"owner\").value; //validate url\n\n    if (!is_url(newURL)) {\n      hasErrors = true;\n      errors.push(\"Invalid URL\");\n    } //validate other fields\n\n\n    if (!newName || !newOwner || !newBirthday) {\n      hasErrors = true;\n      errors.push(\"Please fill out all fields\");\n    } //save changes if no errors\n\n\n    if (!hasErrors && typeof index === \"number\") {\n      cats[index].name = newName;\n      cats[index].thumbnail_url = newURL;\n      cats[index].owner = newOwner;\n      cats[index].birthdate = newBirthday;\n      cats[index].views_count -= 1;\n      localStorage.setItem(\"cats\", JSON.stringify(cats));\n      select(cats[index]);\n      handleCloseEdit();\n    } //display any errors\n    else {\n      for (let i in errors) {\n        let error_div = document.createElement('div');\n        error_div.innerHTML = errors[i];\n        document.getElementById(\"catErrors\").append(error_div);\n      }\n    }\n  } //check if cat props aren't in state, if not then welcome user\n\n\n  if (selected == null) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Welcome to Cat Facts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pic jumbo_paw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Click a cat to see their facts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n  } else {\n    //define picture div styling\n    const picStyle = {\n      backgroundImage: `url(${selected.thumbnail_url})`\n    }; //format birthday\n\n    const d = new Date(selected.birthdate);\n    const day = d.getDate();\n    const month = months[d.getMonth()];\n    const year = d.getFullYear();\n    const formattedDate = day + \" \" + month + \" \" + year;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"window\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"picWrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pic\",\n          style: picStyle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"infoWrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"paw\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            \"data-testid\": \"windowName\",\n            children: selected.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            \"data-testid\": \"windowDate\",\n            children: formattedDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: selected.owner_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Number of views: \", selected.views_count + 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleShowEdit,\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, this), \" | \", /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleShowDelete,\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 64\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        show: showEdit,\n        onHide: handleCloseEdit,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Edit Cat Facts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-4 col-md-4 col-lg-4 form_label\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Thumbnail URL\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 46\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Birthday\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \" Owner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 39\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-8 col-md-8 col-lg-8 form_input\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"url\",\n                name: \"url\",\n                id: \"url\",\n                \"data-testid\": \"urlInput\",\n                placeholder: selected.thumbnail_url\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 117\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"name\",\n                id: \"name\",\n                \"data-testid\": \"editName\",\n                placeholder: selected.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 111\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                name: \"bday\",\n                id: \"bday\",\n                \"data-testid\": \"editDate\",\n                placeholder: selected.birthdate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 116\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                id: \"owner\",\n                name: \"owner\",\n                \"data-testid\": \"editOwner\",\n                children: /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: selected.owner_name,\n                  children: [\" \", selected.owner_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"catErrors\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            onClick: handleCloseEdit,\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: handleSaveEdit,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        show: showDelete,\n        onHide: handleCloseDelete,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: \"Are you sure you want to delete this adorable cat?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            onClick: handleCloseDelete,\n            children: \"No! It's too cute.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: handleConfirmDelete,\n            children: \"Yes, I am a merciless cat deleter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(CatWindow, \"7U9t7NXbg7BL7aZqGkakkin1hBQ=\", false, function () {\n  return [useCat, useCatUpdate];\n});\n\n_c = CatWindow;\n;\nexport default CatWindow;\n\nvar _c;\n\n$RefreshReg$(_c, \"CatWindow\");","map":{"version":3,"sources":["/Users/johnculbreth/Documents/GitHub/react-catfacts/src/components/CatWindow/CatWindow.js"],"names":["React","useState","useCat","useCatUpdate","Button","Modal","urlRegex","months","CatWindow","selected","select","showEdit","setShowEdit","handleCloseEdit","handleShowEdit","showDelete","setShowDelete","handleShowDelete","handleCloseDelete","cats","JSON","parse","localStorage","getItem","index","findIndex","cat","id","handleConfirmDelete","splice","stringify","setItem","is_url","str","test","handleSaveEdit","document","getElementById","innerHTML","hasErrors","errors","newName","value","newBirthday","newURL","newOwner","push","name","thumbnail_url","owner","birthdate","views_count","i","error_div","createElement","append","picStyle","backgroundImage","d","Date","day","getDate","month","getMonth","year","getFullYear","formattedDate","owner_name"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport './CatWindow.css';\nimport { useCat, useCatUpdate } from '../../contexts.js';\nimport { Button, Modal } from 'react-bootstrap';\n\n//Main Display on Right\nconst urlRegex = /^(?:(?:https?|ftp):\\/\\/)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:\\/\\S*)?$/;\nconst months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\nfunction CatWindow() {\n\n  //get selected cat props from context\n  const selected = useCat();\n  const select = useCatUpdate();\n\n  //Edit Modal state + handlers\n  const [showEdit, setShowEdit] = useState(false);\n\n  const handleCloseEdit = () => setShowEdit(false);\n  const handleShowEdit = () => setShowEdit(true);\n\n  //Delete Modal state + handlers\n  const [showDelete, setShowDelete] = useState(false)\n\n  const handleShowDelete = () => setShowDelete(true);\n  const handleCloseDelete = () => setShowDelete(false);\n\n  //determine localStorage index for cat to be edited/deleted\n  let cats = JSON.parse(localStorage.getItem(\"cats\"));\n  let index;\n  if (selected != null) {\n    index = cats.findIndex(cat => cat.id === selected.id);\n  }\n  //Upon delete confirmation, splice array, return new JSON string, and set selected to null\n  function handleConfirmDelete() {\n    cats.splice(index, 1);\n    cats = JSON.stringify(cats);\n    localStorage.setItem(\"cats\", cats);\n    select(null);\n  }\n\n  //validate URL\n  function is_url(str) {\n    if (urlRegex.test(str)) {\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  function handleSaveEdit() {\n    document.getElementById(\"catErrors\").innerHTML = \"\";\n    let hasErrors = false;\n    const errors = [];\n    const newName = document.getElementById(\"name\").value;\n    const newBirthday = document.getElementById(\"bday\").value;\n    const newURL = document.getElementById(\"url\").value;\n    const newOwner = document.getElementById(\"owner\").value;\n\n    //validate url\n    if (!is_url(newURL)) {\n      hasErrors = true;\n      errors.push(\"Invalid URL\");\n    }\n    //validate other fields\n    if (!newName || !newOwner || !newBirthday) {\n      hasErrors = true;\n      errors.push(\"Please fill out all fields\");\n    }\n    //save changes if no errors\n    if (!hasErrors && typeof index === \"number\") {\n      cats[index].name = newName;\n      cats[index].thumbnail_url = newURL;\n      cats[index].owner = newOwner;\n      cats[index].birthdate = newBirthday;\n      cats[index].views_count -= 1;\n      localStorage.setItem(\"cats\", JSON.stringify(cats));\n      select(cats[index]);\n      handleCloseEdit();\n    }\n    //display any errors\n    else {\n      for (let i in errors) {\n        let error_div = document.createElement('div');\n        error_div.innerHTML = errors[i];\n        document.getElementById(\"catErrors\").append(error_div);\n      }\n    }\n\n  }\n\n  //check if cat props aren't in state, if not then welcome user\n  if (selected == null) {\n    return (\n      <div>\n        <h1>Welcome to Cat Facts</h1>\n        <div className=\"pic jumbo_paw\"></div>\n        <h3>Click a cat to see their facts</h3>\n      </div>\n    )\n  } else {\n    //define picture div styling\n    const picStyle = { backgroundImage: `url(${selected.thumbnail_url})` };\n\n    //format birthday\n    const d = new Date(selected.birthdate);\n    const day = d.getDate()\n    const month = months[d.getMonth()]\n    const year = d.getFullYear();\n    const formattedDate = day + \" \" + month + \" \" + year;\n\n\n    return (\n      <div className=\"window\">\n        <div className=\"picWrapper\">\n          <div className=\"pic\" style={picStyle}></div>\n        </div>\n        <div className=\"infoWrapper\">\n          <div className=\"paw\"></div>\n          <div className=\"info\">\n            <div data-testid=\"windowName\">{selected.name}</div>\n            <div data-testid=\"windowDate\">{formattedDate}</div>\n            <div>{selected.owner_name}</div>\n            <div>Number of views: {selected.views_count + 1}</div>\n            <div className=\"buttons\">\n              <button onClick={handleShowEdit}>Edit</button> | <button onClick={handleShowDelete}>Delete</button>\n            </div>\n          </div>\n        </div>\n\n        {/*EditForm Modal*/}\n        <Modal show={showEdit} onHide={handleCloseEdit}>\n          <Modal.Header>\n            <Modal.Title>Edit Cat Facts</Modal.Title>\n          </Modal.Header>\n\n          <Modal.Body>\n            <div className=\"row\">\n              <div className=\"col-sm-4 col-md-4 col-lg-4 form_label\">\n                <label >Thumbnail URL</label><br />\n                <label >Name</label><br />\n                <label >Birthday</label><br />\n                <label > Owner</label><br />\n              </div>\n              <div className=\"col-sm-8 col-md-8 col-lg-8 form_input\">\n                <input type=\"url\" name=\"url\" id=\"url\" data-testid=\"urlInput\" placeholder={selected.thumbnail_url} /><br />\n                <input type=\"text\" name=\"name\" id=\"name\" data-testid=\"editName\" placeholder={selected.name} /><br />\n                <input type=\"date\" name=\"bday\" id=\"bday\" data-testid=\"editDate\" placeholder={selected.birthdate} /><br />\n                <select id=\"owner\" name=\"owner\" data-testid=\"editOwner\">\n                  <option value={selected.owner_name}> {selected.owner_name}</option>\n                </select>\n              </div>\n              <div id=\"catErrors\"></div>\n            </div>\n\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={handleCloseEdit}>\n              Close\n            </Button>\n            <Button variant=\"primary\" onClick={handleSaveEdit}>\n              Save\n            </Button>\n          </Modal.Footer>\n\n        </Modal>\n\n        {/*DeleteForm Modal*/}\n        <Modal show={showDelete} onHide={handleCloseDelete}>\n          <Modal.Header>\n            <Modal.Title>Delete</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>Are you sure you want to delete this adorable cat?</Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={handleCloseDelete}>\n              No! It's too cute.\n            </Button>\n            <Button variant=\"primary\" onClick={handleConfirmDelete}>\n              Yes, I am a merciless cat deleter\n            </Button>\n          </Modal.Footer>\n        </Modal>\n\n      </div>\n\n    )\n  }\n\n};\n\nexport default CatWindow;\n"]},"metadata":{},"sourceType":"module"}